# This file configures the analyzer, which statically analyzes Dart code to
# check for errors, warnings, and lints.
#
# The issues identified by the analyzer are surfaced in the UI of Dart-enabled
# IDEs (https://dart.dev/tools#ides-and-editors). The analyzer can also be
# invoked from the command line by running `flutter analyze`.

# The following line activates a set of recommended lints for Flutter apps,
# packages, and plugins designed to encourage good coding practices.
include: package:flutter_lints/flutter.yaml

analyzer:
  errors:
    # Treat these as errors so CI fails immediately rather than silently accumulating issues.
    # Each rule below was the root cause of a CI failure â€” see git log for context.

    # Importing a package that isn't a direct dependency in pubspec.yaml.
    # Fix: add the package explicitly to dependencies, don't rely on transitive exports.
    depend_on_referenced_packages: error

    # Using BuildContext after an await without a mounted check.
    # Fix: read all context-dependent objects before the first await in async methods.
    use_build_context_synchronously: error

    # Showing a name in an import that is never actually used.
    # Fix: remove the unused name from the show clause.
    unused_shown_name: error

linter:
  rules:
    # Every if/else/for/while body must be wrapped in braces, even single-line.
    # Fix: always use { } around control-flow bodies.
    curly_braces_in_flow_control_structures: true

